!function($,e,t,o){var n="simplegmaps",i="plugin_"+n,a=["DRIVING","WALKING","BICYCLING"],s={GeoLocation:!1,MapOptions:{draggable:!0,zoom:8,scrollwheel:!1,streetViewControl:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:"DEFAULT"}},AppleMapLink:"http://maps.apple.com/",AndroidMapLink:"http://maps.google.com/maps",GenericMapLink:"http://www.google.com/maps",getRouteButton:"#simplegmaps-getroute",getTravelMode:"#simplegmaps-travelmode",routeDirections:"#simplegmaps-directions",externalLink:"#simplegmaps-external",getFromAddress:"#simplegmaps-fromaddress",defaultTravelMode:"DRIVING"},r=function(e,t){for(var o=new google.maps.LatLngBounds,n=0;n<t.length;++n)o.extend(t[n].getPosition());if(o.getNorthEast().equals(o.getSouthWest())){var i=new google.maps.LatLng(o.getNorthEast().lat()+.002,o.getNorthEast().lng()+.002),a=new google.maps.LatLng(o.getNorthEast().lat()-.002,o.getNorthEast().lng()-.002);o.extend(i),o.extend(a)}try{e.fitBounds(o),e.setCenter(o.getCenter())}catch(s){}},p=function(e){var t=e.split(/,\s*/);return $latlng=new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1])),$latlng},l=function(e){if($(e.options.externalLink).length>0){var t=e.Map.markers[0].position.toString(),o="?q="+t;navigator.userAgent.toLowerCase().indexOf("android")>-1?$(e.options.externalLink).attr("href",e.options.AndroidMapLink+o):navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?$(e.options.externalLink).attr("href",e.options.AppleMapLink+o):$(e.options.externalLink).attr("href",e.options.GenericMapLink+o)}},c=function(e,t){var o=new google.maps.InfoWindow,n=new google.maps.Geocoder,i=[],a=t.clone(),s={zoom:8,center:new google.maps.LatLng(-34.397,150.644)},c=new google.maps.Map(t[0],e.options.MapOptions);a.find("div.map-marker").each(function(t){if($(this).attr("data-latlng")){var o=new google.maps.Marker({map:c,title:$(this).data("title"),position:p($(this).data("latlng")),icon:$(this).data("icon")});if($(this).has("div.map-infowindow").length>0){var a=new google.maps.InfoWindow({content:$(this).find("div.map-infowindow").parent().html()});google.maps.event.addListener(o,"click",function(){a.open(c,o)})}else if($(this).has("div.map-custom-infowindow").length>0){var s=$(this).find("div.map-custom-infowindow").parent().html();google.maps.event.addListener(o,"click",function(){$("#simplegmaps-c-iw").remove(),$('<div id="simplegmaps-c-iw"></div>').insertAfter(e.element.selector),$("#simplegmaps-c-iw").html(s),$("#simplegmaps-c-iw .close").on("click",function(e){e.preventDefault(),$("#simplegmaps-c-iw").remove()})})}i.push(o)}else if($(this).attr("data-address")){var r=$(this);n.geocode({address:$(this).data("address")},function(t,o){if(o===google.maps.GeocoderStatus.OK){var n=new google.maps.Marker({map:c,title:r.data("title"),position:t[0].geometry.location,icon:r.data("icon")});if(r.has("div.map-infowindow").length>0){var a=new google.maps.InfoWindow({content:r.find("div.map-infowindow").parent().html()});google.maps.event.addListener(n,"click",function(){a.open(c,n)})}else if(r.has("div.map-custom-infowindow").length>0){var s=r.find("div.map-custom-infowindow").parent().html();google.maps.event.addListener(n,"click",function(){$("#simplegmaps-c-iw").remove(),$('<div id="simplegmaps-c-iw"></div>').insertAfter(e.element.selector),$("#simplegmaps-c-iw").html(s),$("#simplegmaps-c-iw .close").on("click",function(e){e.preventDefault(),$("#simplegmaps-c-iw").remove()})})}i.push(n)}})}}),google.maps.event.addListenerOnce(c,"idle",function(){if(i.length>0)r(c,i);else if(!e.options.MapOptions.center){var t=new google.maps.LatLngBounds;c.fitBounds(t),c.setCenter(t.getCenter())}e.Map={map:c,markers:i},l(e),e.options.GeoLocation&&f(e.Map.map)})},g=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,o="x"===e?t:3&t|8;return o.toString(16)});return e},d=function(e,t){var o=e.Map.markers;e.directionsDisplay.setMap(e.Map.map),e.directionsDisplay.setPanel($(e.options.routeDirections)[0]);var n={origin:t,destination:o[0].position,travelMode:google.maps.TravelMode[e.currentTravelmode]};e.directionsService.route(n,function(t,o){o===google.maps.DirectionsStatus.OK&&e.directionsDisplay.setDirections(t)})},m=function(e,t){var o=e.TravelModes.length;e.currentTravelmode=e.options.defaultTravelMode;for(var n=0;o>n;n++)e.TravelModes[n]===t&&(e.currentTravelmode=t)},u=function(e){e.directionsService=new google.maps.DirectionsService,e.directionsDisplay=new google.maps.DirectionsRenderer({draggable:!0}),$(e.options.getRouteButton).on("click",function(t){t.preventDefault();var o=$(e.options.getTravelMode).val();m(e,o),$(e.options.getFromAddress).val().length>0&&d(e,$(e.options.getFromAddress).val())})},f=function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);e.setCenter(o)},function(){L(e,!0)}):L(e,!1)},h=function(e){e.trafficLayer&&null!==e.trafficLayer.map?e.trafficLayer.setMap(null):(e.trafficLayer=new google.maps.TrafficLayer,e.trafficLayer.setMap(e.Map.map))},v=function(e){e.bicycleLayer&&null!==e.bicycleLayer.map?e.bicycleLayer.setMap(null):(e.bicycleLayer=new google.maps.BicyclingLayer,e.bicycleLayer.setMap(e.Map.map))},w=function(e){e.weatherLayer&&null!==e.weatherLayer.map||e.instancecloudLayer&&null!==e.instancecloudLayer.map?(e.cloudLayer.setMap(null),e.weatherLayer.setMap(null)):(e.weatherLayer=new google.maps.weather.WeatherLayer({temperatureUnits:google.maps.weather.TemperatureUnit.FAHRENHEIT}),e.weatherLayer.setMap(e.Map.map),e.cloudLayer=new google.maps.weather.CloudLayer,e.cloudLayer.setMap(e.Map.map))},L=function(e,t){var o;o=t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.";var n={map:e,position:new google.maps.LatLng(60,105),content:o},i=new google.maps.InfoWindow(n);instance.Map.setCenter(n.position)},y=function(e){this.options=$.extend({},s),this.TravelModes=$.extend([],a)};y.prototype={init:function(e){if($.extend(this.options,e),this.options.MapOptions.center&&(this.options.MapOptions.center=p(this.options.MapOptions.center)),this.options.MapOptions.zoom||(this.options.MapOptions.zoom=8),c(this,this.element),$(this.options.getRouteButton).length>0&&$(this.options.getTravelMode).length>0&&u(this),$(this.options.geoLocationButton).length>0){var t=this;$(this.options.geoLocationButton).on("click",function(e){e.preventDefault(),f(this)}.bind(this))}},getMarkers:function(){return this.Map.map},getMap:function(){return this.Map.map},toggleWeatherLayer:function(){w(this)},toggleTrafficLayer:function(){h(this)},toggleBicycleLayer:function(){v(this)},getPosition:function(){},setGeoLocation:function(){f(this.Map.map)},addMethod:function(e){this.extensions=$.extend(this.extensions,e)},destroy:function(){this.element.data(i,null)}},$.fn[n]=function(e){var t,o;if(this.data(i)instanceof y||this.data(i,new y(this)),o=this.data(i),o.element=this,"undefined"==typeof e||"object"==typeof e)"function"==typeof o.init&&o.init(e);else{if("string"==typeof e&&"function"==typeof o[e])return t=Array.prototype.slice.call(arguments,1),o[e].apply(o,t);$.error("Method "+e+" does not exist on jQuery."+n)}}}(jQuery,window,document);